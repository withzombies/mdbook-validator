[book]
title = "E2E Test Book"
authors = ["Test"]

[preprocessor.validator]
command = "sh -c 'cargo run --manifest-path ../../../Cargo.toml -- \"$@\"' --"
fail_fast = true

[preprocessor.validator.validators.osquery]
container = "osquery/osquery:5.17.0-ubuntu22.04"
script = "../../../validators/validate-osquery.sh"

[preprocessor.validator.validators.sqlite]
container = "keinos/sqlite3:3.47.2"
script = "../../../validators/validate-sqlite.sh"

[preprocessor.validator.validators.osquery-config]
container = "osquery/osquery:5.17.0-ubuntu22.04"
script = "../../../validators/validate-osquery-config.sh"
exec_command = "sh -c 'printf \"%s\" \"$0\" > /tmp/config.json && osqueryi --config_path=/tmp/config.json --config_check >&2 && cat /tmp/config.json'"
